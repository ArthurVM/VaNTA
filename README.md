VaNTA
-----
v0.1.1 Jan-2019 by Arthur V. Morris

Automated discovery and analysis of Tandem Repeats.

This pipeline was developed to automate the process of VNTR discovery. A description of the automated workflow is as follows:

- **Step 1.** Identify Tandem Repeats (TRs) within coding regions of a reference genome.
- **Step 2.** Generate a reference library of these TRs using Tandem Repeats Finder (Benson, 1999).
- **Step 3.** Detect the presence of these TRs within a dataset of query annotated genomes.
- **Step 4.** Align the TRs detected within the query annotated genomes with the corresponding reference TR in a pairwise  manner using EMBOSS-water (part of the EMBOSS: The European Molecular Biology Open Software Suite (2000) Rice, Longden and Bleasby).
- **Step 5.** Identify and score Variable Number Tandem Repeats (VNTRs) using the alignment data.

Critical Dependancies
---------------------
- This pipeline uses Tandem Repeats Finder and EMBOSS-water. **It is essential that the executables for these tools be placed in the directory containing the pipeline scripts.**
- Tandem Repeats Finder (Benson, 1999) can be downloaded from https://tandem.bu.edu/trf/trf.html
- EMBOSS-water (part of the EMBOSS: The European Molecular Biology Open Software Suite (2000) Rice, Longden and Bleasby) can be downloaded from http://emboss.sourceforge.net/
    
Notes on input:
---------------
- All annotation files must be in .vff format (can be converted from .embl format using the embl2vff convert tool).
- All annotation files MUST have a consistent naming convention for their features. There is no sequence homology inference in this pipeline, it instead relies on homologous features being named identically across the whole dataset. It may therefore be prudent to transfer annotations to the query dataset from the reference with the Rapid Annotation Transfer Tool (RATT, Otto et al, 2011). The output from RATT (in .embl format) can then be reformatted using the embl2vff convert tool.

**TR scoring:**
The V-score for each TR locus is calculated to bias smaller polymorphic VNTR's with low repeat motif length (2 to 6 bases) and high flank conservation.

**Output:**
A .tsv file of all Tandem Repeats (VNTRs or otherwise) ordered by V-score.


Running Notes
-------------
This pipeline has been modified from the command line version. Consequently, it creates a large number of output files (CDS libraries, alignment files, multifasta's etc) which are deposited into locations within a specific directory structure. In this version of the tool, this directory structure is created in the local `/tmp/` directory. A unique temporary directory is created for each run of VaNTA within `/tmp/` using the command `mktemp -dt VaNTA_run.XXXXXXX`, and the directory structure created within this working diretory. The only output file which will be made available to the user is the .tsv, which is moved to the galaxy output directory for access by the user.

After running, the temporary directory tree for this run is deleted, along with all output files. This may be suppressed by altering the relevant line within the `VaNTA_galaxy_wrapper.sh` script within the `galaxy/tools/VaNTA` directory. This may be useful if the run is returning errors.

Please consult the manual at https://tandem.bu.edu/trf/trf.unix.help.html for a detail description of the arguments that are supported by `-TR_argstring`. The only arguments that should be used are: `Match Mismatch Delta PM PI Minscore MaxPeriod`. html output is suppressed (`-h`) by default. Options should be ommitted as they will cause error.


Shell wrapper arguments:
------------------------
#
    -Query_vff            Query annotation files in .vff format generated by the embl2vff_convert tool.
    -Ref_vff              Reference annotation file in .vff format used to generate a tandem repeat reference set.
    -flank_size           The size of the regions flanking the tandem repeat locus to be investigate for conservation.
    -TR_argstring 	      The argument string used to run Tandem Repeats Finder.
#
